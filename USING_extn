// -*- systemc -*- vim:syntax=cpp
// TLM extension uses
//   bus locking
//   bus snooping
// TLM extension types
//   ignorable     non-mandatory auto
//   non-ignorable non-mandatory auto
//   non-ignorable mandatory     sticky
// TLM extension classifications
//   guard extension - presence/absence => auto static singleton
//   data extension  - attribute values important => sticky
//   guarded data extension - combination / normal => one of each

#ifdef USAGE
  if (using_auto_extension)
  {
    tlm_generic_payload* trans = mem_mgr.allocate();
    trans->acquire();
  ...
    my_extension* ext = new my_extension;
    ext->attribute = 1;
    trans->set_auto_extension(ext);
  ...
    socket->b_transport(*trans,delay);
  ...
    trans->release();
  }
  else if (using_sticky_extension)
  {
    tlm_generic_payload* trans = mem_mgr.allocate();
    trans->acquire();
  ...
    my_extension* ext = new my_extension;
    ext->attribute = 1;
    trans->set_extension(ext);
  ...
    socket->b_transport(*trans,delay);
  ...
    has_extension* = trans->get_extension(ext);
    if (has_extension == 0) ABSENT;
    trans->clear_extension(ext); // clears pointer
    delete ext; // can be costly
  ...
    trans->release();
  }
#endif

//EOF
